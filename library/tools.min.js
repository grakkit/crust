const Vector=Java.type("org.bukkit.util.Vector"),Location=Java.type("org.bukkit.Location"),ItemStack=Java.type("org.bukkit.inventory.ItemStack"),Cancellable=Java.type("org.bukkit.event.Cancellable"),NamespacedKey=Java.type("org.bukkit.NamespacedKey"),PersistentDataType=Java.type("org.bukkit.persistence.PersistentDataType");export const bridge=(_,$)=>(input,...args)=>{let index=-1;const words=[];input.split(".").forEach(node=>{node.split("").map(char=>{char===_.upper(char)?words[++index]=char:words[index]&&(words[index]+=char)}),++index});let key="";const terms=_.flat(words);return key=terms.length<3?_.camel(terms.join(" ")," "):3===terms.length?_.lower(terms[0][0]+terms[1][0])+terms[2]:_.lower(terms.slice(0,-2).map(term=>term[0]).join(""))+terms.slice(-2).join(""),{[key]:_.object(_.array(Java.type(input).values()),value=>{if(!args[0]||!args[0](value)){let name="";return name=args[1]?args[1](value):"function"==typeof value.getKey?value.getKey().getKey():_.lower(value.name()),{[name]:value,[value]:name}}})}};export const builder=(_,$)=>library=>{const chain=library.chain(_,$);return{wrapper:library.wrapper(_,$),parser:library.parser(_,$),chainer:(things,slayer)=>{const that={},properties={appender:property=>(...args)=>0===args.length?things.map(thing=>_.def(thing)?thing[property]:thing):(things.map(thing=>{if("function"==typeof args[0]){const value=_.def(thing)?thing[property]||{}:thing;args[0](value),_.def(thing)&&(thing[property]=value)}else thing&&(thing[property]=args[0])}),that),appenderLink:property=>(...args)=>0===args.length?slayer?[$(things.map(thing=>_.def(thing)?thing[property]:thing)[0])]:$(things.map(thing=>_.def(thing)?thing[property]:thing)):("function"==typeof args[0]?things.map(thing=>{const value=$(_.def(thing)?thing[property]||{}:thing);args[0](value),_.def(thing)&&(thing[property]=value.instance())}):things.map(thing=>_.def(thing)?thing[property]=$("+").instance(args[0]):thing),that),getter:property=>(...args)=>"function"==typeof args[0]?(things.map(thing=>args[0](_.def(thing)?thing[property]:thing)),that):things.map(thing=>_.def(thing)?thing[property]:thing),getterLink:property=>(...args)=>"function"==typeof args[0]?(args[0]($(things.map(thing=>_.def(thing)?thing[property]:thing))),that):slayer?[$(things.map(thing=>_.def(thing)?thing[property]:thing)[0])]:$(things.map(thing=>_.def(thing)?thing[property]:thing)),getterNest:property=>(...args)=>0===args.length?things.map(thing=>_.def(thing)?thing[property]||{}:thing):1===args.length?things.map(thing=>"function"==typeof args[0]?args[0](_.def(thing)?thing[property]||{}:thing):thing?(thing[property]||{})[args[0]]:void 0):(things.map(thing=>{"function"==typeof args[1]?args[1](_.def(thing)?(thing[property]||{})[args[0]]:thing):thing&&((thing[property]||{})[args[0]]=args[1])}),that),modifier:consumer=>(...args)=>things.map(thing=>consumer(thing,...args)),runner:property=>(...args)=>things.map(thing=>_.def(thing)?thing[property](...args):thing),runnerLink:property=>(...args)=>slayer?[$(things.map(thing=>_.def(thing)?thing[property](...args):thing)[0])]:$(things.map(thing=>_.def(thing)?thing[property](...args):thing)),setter:property=>(...args)=>0===args.length?things.map(thing=>_.def(thing)?thing[property]:thing):(things.map(thing=>{"function"==typeof args[0]?args[0](_.def(thing)?thing[property]:thing):thing&&(thing[property]=args[0])}),that),setterLink:property=>(...args)=>0===args.length?slayer?[$(things.map(thing=>_.def(thing)?thing[property]:thing)[0])]:$(things.map(thing=>_.def(thing)?thing[property]:thing)):("function"==typeof args[0]?args[0]($(things.map(thing=>_.def(thing)?thing[property]:thing))):things.map(thing=>_.def(thing)?thing[property]=$("+").instance(args[0]):thing),that),setterLinkNest:property=>(...args)=>{if(0===args.length)return things.map(thing=>_.def(thing)?thing[property]||{}:thing);if(1===args.length){if("object"==typeof args[0])return things.map(thing=>_.def(thing)&&(thing[property]=args[0])),that;{const output=things.map(thing=>"function"==typeof args[0]?args[0](_.def(thing)?thing[property]||{}:thing):thing?(thing[property]||{})[args[0]]:void 0);return slayer?[$(output[0])]:$(output)}}return things.map(thing=>{"function"==typeof args[1]?args[1](_.def(thing)?(thing[property]||{})[args[0]]:thing):thing&&((thing[property]||{})[args[0]]=args[1])}),that},setterNest:property=>(...args)=>0===args.length?things.map(thing=>_.def(thing)?thing[property]||{}:thing):1===args.length?"object"==typeof args[0]?(things.map(thing=>_.def(thing)&&(thing[property]=args[0])),that):things.map(thing=>"function"==typeof args[0]?args[0](_.def(thing)?thing[property]||{}:thing):thing?(thing[property]||{})[args[0]]:void 0):(things.map(thing=>{"function"==typeof args[1]?args[1](_.def(thing)?(thing[property]||{})[args[0]]:thing):thing&&((thing[property]||{})[args[0]]=args[1])}),that),voider:property=>(...args)=>(things.map(thing=>_.def(thing)?thing[property](...args):thing),that)},scripts=_.object(_.entries(chain),entry=>"function"==typeof entry.value?{[entry.key]:properties.modifier(entry.value)}:{[entry.key]:properties[entry.value](entry.key)});return Object.assign(that,scripts)},links:_.keys(chain)}};export const command=(_,$)=>({on:name=>{let tab=()=>[],run=()=>{};const that={tab:handler=>(tab=handler,that),run:handler=>(run=handler,that)};return core.command({name:name,execute:(...args)=>run(...args),tabComplete:(player,...args)=>tab(player,args.length,...args)||[]}),that}});export const event=(_,$)=>({on:shortcut=>{let type=void 0;const suffix=`${_.pascal(shortcut)}Event`;if(prefixes.forEach(prefix=>{if(void 0===type)try{Java.type(`${prefix}.${suffix}`),type=`${prefix}.${suffix}`}catch(error){}}),void 0===type)throw"EventError: That event does not exist!";{const steps=[],that={if:condition=>(steps.push({type:"condition",item:condition}),that),do:listener=>(steps.push({type:"listener",item:listener}),that)};return core.event(type,event=>{if(event instanceof Java.type(type)){const storage={},cancellable=event instanceof Cancellable;let ready=!0;steps.forEach(step=>{switch(step.type){case"condition":switch(typeof step.item){case"boolean":cancellable&&step.item===event.isCancelled()&&(ready=!1);break;case"function":step.item(event,storage)||(ready=!1);break;case"object":_.match(_.access(event),step.item)||(ready=!1)}break;case"listener":if(ready)try{step.item(event,storage)}catch(error){throw ready=!1,error}}})}}),that}}});export const prefixes=["org.bukkit.event.block","org.bukkit.event.command","org.bukkit.event.enchantment","org.bukkit.event.entity","org.bukkit.event.hanging","org.bukkit.event.inventory","org.bukkit.event.player","org.bukkit.event.raid","org.bukkit.event.server","org.bukkit.event.vehicle","org.bukkit.event.weather","org.bukkit.event.world","org.spigotmc.event.entity","org.spigotmc.event.player","com.destroystokyo.paper.event.block","com.destroystokyo.paper.event.entity","com.destroystokyo.paper.event.executor","com.destroystokyo.paper.event.player","com.destroystokyo.paper.event.profile","com.destroystokyo.paper.event.server"];export const utility=(_,$,jx)=>({backs:source=>_.strain($[source],entry=>entry.key===_.upper(entry.key)),data:(container,value)=>{const key=new NamespacedKey(core.plugin,"jx"),type=PersistentDataType.STRING;if(_.def(value))container.set(key,type,JSON.stringify(value,!0));else{if(null!==value)return JSON.parse(container.get(key,type))||{};container.remove(key)}},distance:(source,target,option)=>{_.def(source)&&"function"==typeof source.location&&(source=source.location()),_.def(target)&&"function"==typeof target.location&&(target=target.location()),source=$("+").instance(source),target=$("+").instance(target);let x=_.iterable(source)?source[0]:source;"function"==typeof x.getLocation&&(x=x.getLocation()),x=x instanceof Location||x instanceof Vector;let y=_.iterable(target)?target[0]:target;if("function"==typeof y.getLocation&&(y=y.getLocation()),y=y instanceof Location||y instanceof Vector,x&&y)return _.iterable(source)&&_.iterable(target)?source.map(from=>target.map(to=>_.dist(from,to,option))):_.iterable(source)?source.map(from=>_.dist(from,target,option)):_.iterable(target)?target.map(to=>_.dist(source,to,option)):_.dist(source,target,option);throw x?"invalid-target":y?"invalid-source":"invalid-both"},drop:(source,item,option)=>{_.def(source)&&"function"==typeof source.location&&(source=source.location()),source=$("+").instance(source),item=$("+").instance(item);let x=_.iterable(source)?source[0]:source;"function"==typeof x.getLocation&&(x=x.getLocation()),x=x instanceof Location;let y=_.iterable(item)?item[0]:item;if(y=y instanceof ItemStack,x&&y)return _.iterable(source)&&_.iterable(item)?source.map(from=>item.map(to=>_.drop(from,to,option))):_.iterable(source)?source.map(from=>_.drop(from,item,option)):_.iterable(item)?item.map(to=>_.drop(source,to,option)):_.drop(source,item,option);throw x?"invald-item":y?"invald-location":"invalid-both"},framework:()=>_,fronts:source=>_.strain($[source],entry=>entry.key===_.lower(entry.key)),instance:(thing,callback)=>{if("object"==typeof thing){if("function"==typeof thing.instance){const output=thing.instance();return"function"==typeof callback?_.iterable(output)?output.map(callback):callback(output):output}return"string"==typeof thing.format?jx[thing.format].parser(thing):thing}return thing},spawn:(location,entity)=>{location=$("+").instance(location),entity=$("+").instance(entity);let x=_.iterable(location)?location[0]:location;x=x instanceof Location;let y=_.iterable(entity)?entity[0]:entity;if(y="string"==typeof y,x&&y)return _.iterable(location)&&_.iterable(entity)?location.map(from=>entity.map(to=>from.getWorld().spawnEntity(from,$.entityType[to]))):_.iterable(location)?location.map(from=>from.getWorld().spawnEntity(from,$.entityType[entity])):_.iterable(entity)?entity.map(to=>location.getWorld().spawnEntity(location,$.entityType[to])):location.getWorld().spawnEntity(location,$.entityType[entity]);throw x?"invald-entity":y?"invald-location":"invalid-both"}});export const receiver=(_,$)=>(type,input,jx)=>{if(_.iterable(input)){const that=jx[type].chainer([...input].map(instance=>_.def(instance)?jx[type].wrapper(instance):instance));return Object.assign(that,{[Symbol.iterator]:(...args)=>input.values(...args),first:()=>$(_.flat([...input])[0]),last:()=>$(_.flat([...input])[input.length-1]),entry:index=>$([...input].slice(index)[0]),each:consumer=>[...input].map($).map(consumer)})}{const that=jx[type].chainer([_.def(input)?jx[type].wrapper(input):input],1),slayer=_.object(jx[type].links,link=>({[link]:(...args)=>{const result=that[link](...args);return result===that?slayer:result[0]}}));return slayer}};