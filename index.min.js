if("modern"!==core.version)throw"You must be running on spigot or paper to use JX!";import{_}from"./library/framework.min.js";import*as tools from"./library/tools.min.js";import*as bar from"./library/bar.min.js";import*as block from"./library/block.min.js";import*as empty from"./library/empty.min.js";import*as entity from"./library/entity.min.js";import*as item from"./library/item.min.js";import*as location from"./library/location.min.js";import*as vector from"./library/vector.min.js";import*as modifier from"./library/modifier.min.js";const Block=Java.type("org.bukkit.block.Block"),Entity=Java.type("org.bukkit.entity.Entity"),Vector=Java.type("org.bukkit.util.Vector"),Location=Java.type("org.bukkit.Location"),ItemStack=Java.type("org.bukkit.inventory.ItemStack"),KeyedBossBar=Java.type("org.bukkit.boss.KeyedBossBar"),AttributeModifier=Java.type("org.bukkit.attribute.AttributeModifier"),$=(object,...args)=>{if(!_.def(object))return null;switch(typeof object){case"string":const prefix=object[0],suffix=object.slice(1);switch(prefix){case"~":return $[suffix]||Object.assign($,bridge(suffix,...args));case"!":return $(new ItemStack($("+").fronts("material")[suffix]).ensureServerConversions());case"@":return $([...server.selectEntities(args[0]||server.getConsoleSender(),object)]);case"#":return core.data(suffix,args[0]);case"?":const location=args[0]||self.getLocation();return $(location.getWorld().spawnEntity(location,$("+").fronts("entityType")[suffix]));case"*":return event.on(suffix);case"/":return command.on(suffix);case"+":return utility;default:return $(_.player(object).online)}case"object":if(null===object)return null;const input=_.iterable(object)?_.flat([...object])[0]:object;if(void 0===input)return receiver("empty",object,jx);if("function"==typeof input.instance)return object;if(_.iterable(input))return[...object].map(entry=>$(entry));if(_.def(input)){if("string"==typeof input.format){const library=jx[input.format];return library?_.iterable(object)?$([...object].map(entry=>_.def(entry)?library.parser(entry):entry)):$(_.def(object)?library.parser(object):object):null}return receiver(input instanceof KeyedBossBar?"bar":input instanceof AttributeModifier?"modifier":input instanceof Block?"block":input instanceof Entity?"entity":input instanceof ItemStack?"item":input instanceof Location?"location":input instanceof Vector?"vector":"empty",object,jx)}return null}},bridge=tools.bridge(_,$),builder=tools.builder(_,$),command=tools.command(_,$),event=tools.event(_,$),receiver=tools.receiver(_,$),jx={bar:builder(bar),block:builder(block),empty:builder(empty),entity:builder(entity),item:builder(item),location:builder(location),vector:builder(vector),modifier:builder(modifier)},utility=tools.utility(_,$,jx);$("~org.bukkit.Sound"),$("~org.bukkit.GameMode"),$("~org.bukkit.Instrument"),$("~org.bukkit.boss.BarFlag"),$("~org.bukkit.boss.BarColor"),$("~org.bukkit.boss.BarStyle"),$("~org.bukkit.SoundCategory"),$("~org.bukkit.block.BlockFace"),$("~org.bukkit.inventory.EquipmentSlot"),$("~org.bukkit.enchantments.Enchantment"),$("~org.bukkit.attribute.AttributeModifier.Operation"),$("~org.bukkit.event.player.PlayerTeleportEvent.TeleportCause"),$("~org.bukkit.Material",value=>value.isLegacy()),$("~org.bukkit.entity.EntityType",value=>"UNKNOWN"===value.name()),$("~org.bukkit.inventory.ItemFlag",null,value=>_.splice(_.lower(value.name()),"_",1)),$("~org.bukkit.attribute.Attribute",null,value=>value.getKey().getKey().split(".")[1]),$("~org.bukkit.potion.PotionEffectType",null,value=>value.getHandle().c().split(".")[2]),core.export($);