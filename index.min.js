const framework=core.import("grakkit/framework"),API=framework.object(framework.entries({entityType:{source:Java.type("org.bukkit.entity.EntityType"),consumer:value=>"UNKNOWN"===value.name()?void 0:value.getKey().getKey()},equipmentSlot:{source:Java.type("org.bukkit.inventory.EquipmentSlot")},itemFlag:{source:Java.type("org.bukkit.inventory.ItemFlag")},attribute:{source:Java.type("org.bukkit.attribute.Attribute")},amOperation:{source:Java.type("org.bukkit.attribute.AttributeModifier.Operation")},enchantment:{source:Java.type("org.bukkit.enchantments.Enchantment"),consumer:value=>value.getKey().getKey()},material:{source:Java.type("org.bukkit.Material"),consumer:value=>value.isLegacy()?void 0:value.getKey().getKey()},gameMode:{source:Java.type("org.bukkit.GameMode")},peType:{source:Java.type("org.bukkit.potion.PotionEffectType"),consumer:value=>value.getHandle().c().split(".")[2]}}),entry=>({[entry.key]:framework.object(framework.array(entry.value.source.values()),value=>{const consumer=entry.value.consumer||(value=>value.name().toLowerCase());return{[consumer(value)]:value}})}));import*as item from"./library/item.min.js";import*as entity from"./library/entity.min.js";const wrappers={item:item.wrapper(framework,API),entity:entity.wrapper(framework,API)},chainers={item:item.chainer(framework,API),entity:entity.chainer(framework,API)},links={item:item.links,entity:entity.links},event={on:shortcut=>{const prefixes=[];let index=event.version;for(;index<3;)prefixes.push(...event.prefixes[index++]);let type=void 0;const suffix=`${framework.pascal(shortcut)}Event`;if(prefixes.forEach(prefix=>{if(void 0===type)try{Java.type(`${prefix}.${suffix}`),type=`${prefix}.${suffix}`}catch(error){}}),void 0===type)throw"EventError: That event does not exist!";{const conditions=[],listeners=[],that={if:condition=>(conditions.push(condition),that),do:listener=>(listeners.push(listener),that)};return core.event(type,(...args)=>{listeners.forEach(listener=>{let ready=!0;conditions.forEach(condition=>{const event=args[0],cancellable=event instanceof Java.type("org.bukkit.event.Cancellable"),player=event instanceof Java.type("org.bukkit.event.player.PlayerEvent");switch(typeof condition){case"boolean":cancellable&&condition===event.isCancelled()&&(ready=!1);break;case"function":condition(...args)||(ready=!1);break;case"object":framework.match(framework.access(event),condition)||(ready=!1)}}),ready&&listener(...args)})}),that}},prefixes:[["com.destroystokyo.paper.event.block","com.destroystokyo.paper.event.entity","com.destroystokyo.paper.event.executor","com.destroystokyo.paper.event.player","com.destroystokyo.paper.event.profile","com.destroystokyo.paper.event.server"],["org.spigotmc.event.entity","org.spigotmc.event.player"],["org.bukkit.event.block","org.bukkit.event.command","org.bukkit.event.enchantment","org.bukkit.event.entity","org.bukkit.event.hanging","org.bukkit.event.inventory","org.bukkit.event.player","org.bukkit.event.raid","org.bukkit.event.server","org.bukkit.event.vehicle","org.bukkit.event.weather","org.bukkit.event.world"]],version:(()=>{let version=0;try{Java.type("com.destroystokyo.paper.event.player.IllegalPacketEvent")}catch(error){version=1;try{Java.type("org.spigotmc.event.player.PlayerSpawnLocationEvent")}catch(error){version=2}}return version})()},one=(type,instance)=>{const that=chainers[type](wrappers[type](instance)),output=framework.object(links[type],link=>({[link]:(...args)=>{const result=that[link](...args);return that===result?output:result[0]}}));return framework.extend(output,{get one(){return instance}})},all=(type,...instances)=>{const that=chainers[type](...instances.map(instance=>wrappers[type](instance)));return framework.extend(that,{get first(){return instances[0]},forEach:script=>instances.forEach(script),get last(){return instances.slice(-1)[0]}})};export function $(object,...args){if(null!==object)switch(typeof object){case"string":const prefix=object[0],suffix=object.slice(1);switch(prefix){case"~":return null;case"!":return one("item",new(Java.type("org.bukkit.inventory.ItemStack"))(API.material[suffix]));case"@":const context=args[0]||server.getConsoleSender();return all("entity",...framework.array(server.selectEntities(context,object)));case"#":return core.data(suffix,args[0]);case"?":return one("entity",args[0].world.spawnEntity(args[0],API.entityType[suffix]));case"*":return event.on(suffix);case"/":return core.command({name:suffix,execute:args[0]||(()=>{}),tabComplete:(...args)=>args[0](...args)||[]});default:return $(`~${suffix}`)}case"object":if(object instanceof Java.type("org.bukkit.block.Block"));else{if(object instanceof Java.type("org.bukkit.entity.Entity"))return one("entity",object);if(object instanceof Java.type("org.bukkit.inventory.ItemStack"))return one("item",object);object instanceof Java.type("org.bukkit.inventory.Inventory")||object instanceof Java.type("org.bukkit.Location")||Java.type("org.bukkit.World")}}}core.export(Object.assign($,API));